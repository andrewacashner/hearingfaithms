\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{aacbook}[2018/03/09 Andrew Cashner's book package, to be
called from header of Pandoc for Markdown conversion]

\RequirePackage{xparse}

%*******************************************
% FONT

\RequirePackage{fontspec}
\setmainfont{Libertinus Serif}
\setmathfont{Libertinus Math}

%*******************************************
% SPACING, PAGE STYLE

\frenchspacing
\raggedbottom

\RequirePackage{setspace}
\doublespacing

\RequirePackage[document]{ragged2e}
\setlength{\RaggedRightParindent}{0.5in}
\setlength{\parskip}{0pt plus 0.1pt}

\RequirePackage[none]{hyphenat}

\RenewDocumentEnvironment{quote}{}
    {\list{}{\leftmargin=0.25in \rightmargin=0.25in}%
    \item\relax}
    {\endlist}

\RequirePackage[defaultlines=2,all]{nowidow}

%*******************************************
% ENDNOTES

\RequirePackage{endnotes}

\RenewDocumentCommand{\enoteformat}{}{%
    \setlength{\parindent}{0.5in}%
    \@theenmark.\ }

\let\footnote\endnote
\AtEndDocument{\clearpage\doublespacing\theendnotes}

%*****************************************
% INCLUDE GRAPHICS AND PDFS FOR FLOATS

\RequirePackage{graphicx}
\graphicspath{  {img/figures/} 
                {img/music-examples/}
                {img/tables/} }

\NewDocumentCommand{\includeRawGraphic}{ o m }{%
    \par\bigskip
    \begin{center}
        \IfValueTF{#1}
        {\includegraphics[#1]{#2}}
        {\includegraphics{#2}}
    \end{center}
    \clearpage
}

\NewDocumentCommand{\includeWideGraphic}{ m }{%
    \includeRawGraphic[width=\textwidth]{#1}%
}


\RequirePackage{pdfpages}
\includepdfset{%
    pages=-,
    noautoscale
}
\NewDocumentCommand{\includePoemPDF}{ m }{%
    \includepdf{img/poem-examples/#1}%
}

% \NewDocumentCommand{\includeFloatFile}{ m }{%
%     \par\bigskip
%     \begingroup
%     \setlength{\RaggedRightParindent}{0pt}
%     \setlength{\parindent}{0pt}
%     \input{#1}
%     \endgroup
%     \clearpage
% }

% DRAFT MODE
% \renewcommand{\includeWideGraphic}[1]{}

\renewcommand{\toprule}{}
\renewcommand{\bottomrule}{}
\endinput

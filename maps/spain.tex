\documentclass{article}

\usepackage[T1]{fontenc}
\usepackage{fbb}

\usepackage{pst-geo}

\usepackage{xparse}
\usepackage{environ}
\usepackage{graphicx}

\usepackage{stackengine}
\setstackgap{S}{2pt}

\NewEnviron{map}{%
    \noindent\resizebox{\textwidth}{!}{\BODY}%
}

% Data path
\NewExpandableDocumentCommand{\path}{}{%
    /usr/local/texlive/2019/texmf-dist/tex/generic/pst-geo/data%
}

% Base unit
\NewExpandableDocumentCommand{\unit}{}{15}

% Width of PS lines
\NewExpandableDocumentCommand{\psLineWd}{}{0.25\pslinewidth}

% Coordinates for map frame (portion of world map, offset from equator at 0
% longitude
\NewExpandableDocumentCommand{\startx}{}{-0.52} 
\NewExpandableDocumentCommand{\endx}{}  {0.25}

\NewExpandableDocumentCommand{\starty}{}{1.85}
\NewExpandableDocumentCommand{\endy}{}  {2.5}

\NewDocumentCommand{\cityfont}{}    {\tiny}
\NewDocumentCommand{\bigcityfont}{} {\scriptsize}
\NewDocumentCommand{\regionfont}{}  {\tiny\itshape}

\NewExpandableDocumentCommand{\cityMarkerStyle}{}{solid}
\NewExpandableDocumentCommand{\cityMarkerColor}{}{blue}

\newlength{\cityLabelWd}
\setlength{\cityLabelWd}{1pt}

\newlength{\cityLabelSep}
\setlength{\cityLabelSep}{2.5pt}

% Put a city on the map
% #1 optional: angle of rotation
% #2 longitude
% #3 latitude
% #4 name (used for node name)
% #5 name (if present, #4 used for node name, #5 for text;
%    (if absent, #4 is used for both with default \cityfont for text)
\NewDocumentCommand{\city}{ O{0} m m m o }{%
    \pnodeMap(#2,#3){#4}%
    %
    \pscircle[
        fillstyle=\cityMarkerStyle,
        fillcolor=\cityMarkerColor
    ](#4){\cityLabelWd}%
    %
    \uput{\cityLabelSep}[#1](#4){%
        \cityfont
        \IfValueTF{#5}{#5}{\cityfont#4}%
    }%
}

% Any kind of label on the map
% #1 optional: rotation angle (default 0)
% #2 latitude
% #3 longitude
% #4 label for node
% #5 text
\NewDocumentCommand{\mapLabel}{ O{0} m m m m }{%
    \pnodeMap(#2,#3){#4}%
    \rput{#1}(#4){#5}%
}

\begin{document}
\begin{map}
    \psset{
        linewidth=\psLineWd,
        unit=\unit
    }
    \begin{pspicture}*(\startx,\starty)(\endx,\endy)
       
        \psframe(\startx,\starty)(\endx,\endy)
        
        \psset{
            type=1, % Mercator projection
            latitude0=40.4168, % center on Madrid
            longitude0=-3.7037
        }

        \WorldMapII[
            path=\path,
            maillage=false,
            level=5,
            borders=true,
            rivers=false,
            Europe=true,
            Africa=true,
            Asia=false,
            Northamerica=false,
            Southamerica=false,
        ]

        \city[225] {-9.1393}{38.7223}
        {Lisbon}[\bigcityfont\textsc{Lisbon}]

        \city[90] {-7.9135}{38.5714}
        {Évora}
        
        \city[60] {-8.5448}{42.8782}
        {Santiago de Compostela}
        
        \city[135] {-2.6818}{42.8592} 
        {Vitória}

        \city[90] {-3.6969}{42.344}
        {Burgos}

        \city[90] {-4.7245}{41.6522}
        {Valladolid}
        
        \city[90] {-5.6635}{40.9701}
        {Salamanca}

        \city[90] {-4.1088}{40.9429}
        {Segovia}
        
        \city[120] {-3.7037}{40.4168}
        {Madrid}[\bigcityfont\textsc{Madrid}]

        \city[300] {-3.3635}{40.482}
        {Alcala}[\Shortstack{{Alcalá de} Henares}]

        \city[90] {-4.0273}{39.8628}
        {Toledo}[\bigcityfont Toledo]
        
        \city[125] {-1.6468}{41.3532}
        {Calatayud}

        \city{-1.4144}{41.1144}
        {Daroca}

        \city[90] {-0.8891}{41.6488}
        {Zaragoza}[\bigcityfont Zaragoza]
        
        \city[90] {0.62}{41.6176}
        {Lleida}

        \city[90] {1.8381}{41.5931}
        {Montserrat}

        \city[350] {2.1734}{41.3851}
        {Barcelona}[\bigcityfont Barcelona]

        \city {2.5804}{41.589}
        {Canet de Mar}

        \city[90] {2.8214}{41.9794}
        {Girona}

        \city[135] {2.8948}{42.6887}
        {Pernignan}

        \city[170] {-0.3763}{39.4699}
        {Valencia}
       
        \city[45] {-4.7794}{37.8882} 
        {Córdoba}
        
        \city[90] {-3.5986}{37.1773}
        {Granada}
        
        \city[130] {-5.9845}{37.3891}
        {Seville}[\bigcityfont Seville]

        \city[320] {-6.1261}{36.685}
        {Jerez}[\Shortstack{{Jerez de la} Frontera}]
        
        \city[200] {-6.2886}{36.5271}
        {Cádiz}

        \city[90] {-5.1612}{36.7462}
        {Ronda}
        
        \city[60] {-4.4213}{36.7213}
        {Málaga}
       
        \mapLabel {-3.7}{39}
        {Spain} {S\quad\quad P\quad\quad A\quad\quad I\quad\quad N}
       
        \mapLabel[80] {-8.2}{40.25}
        {Portugal} {P O R T U G A L}

        \mapLabel {0.75}{43.5}
        {France} {F R A N C E}

        \mapLabel{-4}{44}
        {Atlantic} {\itshape Atlantic Ocean}

        \mapLabel {1.3}{37.6}
        {Mediterranean} {\itshape\small Mediterranean Sea}

        \mapLabel[15] {1.5}{35.5}
        {Ottoman} {OTTOMAN EMPIRE}

        \mapLabel[30] {2}{39.8}
        {Balearic} {\regionfont B a l e a r i c\quad I s l a n d s}

        \mapLabel[25] {0.8}{41.2}
        {Catalonia} {\regionfont C a t a l o n i a}

        \mapLabel {-.9}{41.4}
        {Aragon} {\regionfont A r a g o n}

        \mapLabel[10] {-5}{37.5}
        {Andalusia} {\regionfont A n d a l u s i a}

        \mapLabel {-5.2}{40.3}
        {Castile} {\regionfont C a s t i l e}

        \mapLabel[60] {-8.1}{42.6}
        {Galicia} {\regionfont G a l i c i a}
    \end{pspicture}
\end{map}
\end{document}

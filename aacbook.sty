\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{aacbook}[2018/03/09 Andrew Cashner's book package, to be
called from header of Pandoc for Markdown conversion]

% undo the wrong changes made by mathspec
\let\RequirePackage\original@RequirePackage

\RequirePackage{xparse}

\RequirePackage{fontspec}
\setmainfont{Libertinus Serif}
\setmathfont{Libertinus Math}

\frenchspacing
\raggedbottom

\markright{DRAFT---Please do not circulate}
\pagestyle{myheadings}

\RequirePackage{setspace}
\doublespacing

\RequirePackage[document]{ragged2e}
\setlength{\RaggedRightParindent}{0.5in}
\setlength{\parskip}{0pt plus 0.1pt}

\RequirePackage[none]{hyphenat}

\RenewDocumentEnvironment{quote}{}
    {\list{}{\leftmargin=0.5in \rightmargin=0.5in}%
    \item\relax}
    {\endlist}

\RequirePackage{endnotes}

\RenewDocumentCommand{\enoteformat}{}{%
    \setlength{\parindent}{0.5in}%
    \@theenmark.\ }

\let\footnote\endnote
\AtEndDocument{\clearpage\doublespacing\theendnotes}

\RequirePackage{graphicx}
\NewDocumentCommand{\includeRawGraphic}{ o m }{%
    \par\bigskip
    \begin{center}
        \IfValueTF{#1}
        {\includegraphics[#1]{#2}}
        {\includegraphics{#2}}
    \end{center}
    \clearpage
}

\NewDocumentCommand{\includeWideGraphic}{ m }{%
    \includeRawGraphic[width=\textwidth]{#1}%
}


\RequirePackage{pdfpages}
\includepdfset{%
    pages=-,
    noautoscale
}

\NewDocumentCommand{\includeFloatFile}{ m }{%
    \par\bigskip
    \begingroup
    \setlength{\RaggedRightParindent}{0pt}
    \setlength{\parindent}{0pt}
    \input{#1}
    \endgroup
    \clearpage
}

% DRAFT MODE
% \renewcommand{\includeWideGraphic}[1]{}

\endinput
